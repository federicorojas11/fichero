<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <!-- Estilos importados desde _css.html -->
  <?!= include('_css'); ?>
 </head>
<body>
  <div class="tab">
    <button class="tablinks active" onclick="openTab(event, 'entrada')">Entrada</button>
    <button class="tablinks" onclick="openTab(event, 'salida')">Salida</button>
    <button class="tablinks" onclick="openTab(event, 'consulta')">Consulta</button>
  </div>

  <!-- Formulario Entrada -->
<div id="entrada" class="tabcontent active">
  <form id="formEntrada">
    <fieldset>
      <legend>Fichero de legajos <br> Entrada</legend>
      
      <label for="fechaEntrada">Fecha</label>
      <input id="fechaEntrada" type="date"><br>
      <div class="error-message" id="fechaEntrada-error"></div>
      <br>
      <script>
        document.getElementById('fechaEntrada').valueAsDate = new Date();
      </script>

      <label for="numeroLegajoEntrada">Número de legajo</label>
      <input type="number" id="numeroLegajoEntrada"><br>
      <div class="error-message" id="numeroLegajoEntrada-error"></div>
      <br>
      <label for="credencialEntrada">Credencial</label>
      <input type="number" id="credencialEntrada"><br>
      <div class="error-message" id="credencialEntrada-error"></div>
      <br>
      <button type="button" class="guardar" onclick="guardarEntrada()">Guardar</button>
      <button type="button" class="limpiar" onclick="limpiarFormulario('formEntrada')">Cancelar</button>
    </fieldset>
  </form>
</div>


  <!-- Formulario Salida -->
  <div id="salida" class="tabcontent">
    <form id="formSalida">
      <fieldset>
        <legend>Fichero de legajos <br> Salida</legend>
        <label for="fechaSalida">Fecha</label>
        <input id="fechaSalida" type="date">
        <script>
          document.getElementById('fechaSalida').valueAsDate = new Date();
        </script>
        <br>
        <div class="error-message" id="fechaSalida-error"></div>
        <br>


        <label for="numeroLegajoSalida">Número de legajo</label>
        <input type="number" id="numeroLegajoSalida"><br>
        <div class="error-message" id="numeroLegajoSalida-error"></div>
        <br>

        <label for="divisionSalida">División</label>
        <select id="divisionSalida">
          <option>--Seleccione división--</option>
          <option value="AP">Actuaciones Penitenciarias</option>
          <option value="JT">Jefatura de Turno</option>
          <option value="OI">Operativa de Interior</option>
        </select><br>
        <div class="error-message" id="divisionSalida-error"></div>
        <br>

        <label for="credencialSalida">Credencial</label>
        <input type="number" id="credencialSalida"><br>
        <div class="error-message" id="credencialSalida-error"></div>
        <br>
        
        <button type="button" class="guardar" onclick="guardarSalida()">Guardar</button>
        <button type="button" class="limpiar" onclick="limpiarFormulario('formSalida')">Cancelar</button>
      </fieldset>
    </form>
  </div>

  <!-- Formulario Consulta -->
  <div id="consulta" class="tabcontent">
    <form id="formConsulta">
      <fieldset>
        <legend>Consulta de legajos</legend>
        <label for="lpuConsulta">Número de legajo</label><br>
        <input type="text" id="lpuConsulta"><br>
        <div class="error-message" id="lpuConsulta-error"></div>
        <br>

        <button type="button" class="guardar" onclick="consultarLegajo()">Consultar</button>
        <button type="button" class="limpiar" onclick="limpiarFormulario('formConsulta')">Cancelar</button>
      </fieldset>
      <div id="resultadoConsulta"></div>
    </form>
  </div>

  <div id="notification" style="display:none; position:fixed; bottom:20px; right:20px; background:#428f37; color:#fff; padding:10px 20px; border-radius:4px; z-index:1000;"></div>

  <!-- Main loader container with overlay -->
  <div id="loader-overlay" class="loader-overlay" style="display: none;">
    <div class="loader-container">
      <!-- Circular Progress Loader (Primary) -->
      <div class="loader-circular">
        <svg viewBox="0 0 50 50" class="circular-svg">
          <circle cx="25" cy="25" r="20" fill="none" stroke="#1976d2" stroke-width="3" stroke-linecap="round" stroke-dasharray="125.6" stroke-dashoffset="125.6" class="path"></circle>
        </svg>
      </div>
      
      <!-- Loading text -->
      <div class="loader-text">Procesando datos...</div>
    </div>
  </div>

  <!-- Alternative Linear Progress Loader -->
  <div id="linear-loader" class="linear-loader" style="display: none;">
    <div class="linear-progress">
      <div class="linear-progress-bar"></div>
    </div>
  </div>

  <!-- Modal para mostrar al encontrar resultados -->
  <div id="estadoModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Estado Actual del Legajo</h2>
        <span class="close">&times;</span>
      </div>
      <div class="modal-body">
        <div id="estadoContent">
          <!-- Contenido dinámico se insertará aquí -->
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-close">Cerrar</button>
      </div>
    </div>
  </div>

  <!-- Loader de notificación -->
  <div id="loader-notification">
    <div class="loader-content">
      <div class="loader-spinner"></div>
      <div class="loader-text" id="loaderMessage">Procesando datos...</div>
    </div>
  </div>

  <!-- Javascript y css importados -->  
  <?!= include('_js'); ?>
  <?!= include('_spinner'); ?>
  <?!= include('_spinner_notification'); ?>
</body>
</html>
